function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return n!=null?decodeURI(n[2]):null}function md5(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,s,o;return i=e&2147483648,s=t&2147483648,n=e&1073741824,r=t&1073741824,o=(e&1073741823)+(t&1073741823),n&r?o^2147483648^i^s:n|r?o&1073741824?o^3221225472^i^s:o^1073741824^i^s:o^i^s}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function s(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function u(e,i,s,o,u,a,f){return e=n(e,n(n(r(i,s,o),u),f)),n(t(e,a),i)}function a(e,r,s,o,u,a,f){return e=n(e,n(n(i(r,s,o),u),f)),n(t(e,a),r)}function f(e,r,i,o,u,a,f){return e=n(e,n(n(s(r,i,o),u),f)),n(t(e,a),r)}function l(e,r,i,s,u,a,f){return e=n(e,n(n(o(r,i,s),u),f)),n(t(e,a),r)}function c(e){var t,n=e.length,r=n+8,i=(r-r%64)/64,s=(i+1)*16,o=Array(s-1),u=0,a=0;while(a<n)t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|e.charCodeAt(a)<<u,a++;return t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|128<<u,o[s-2]=n<<3,o[s-1]=n>>>29,o}function h(e){var t="",n="",r,i;for(i=0;i<=3;i++)r=e>>>i*8&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2);return t}function p(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var d=Array(),v,m,g,y,b,w,E,S,x,T=7,N=12,C=17,k=22,L=5,A=9,O=14,M=20,_=4,D=11,P=16,H=23,B=6,j=10,F=15,I=21;e=p(e),d=c(e),w=1732584193,E=4023233417,S=2562383102,x=271733878;for(v=0;v<d.length;v+=16)m=w,g=E,y=S,b=x,w=u(w,E,S,x,d[v+0],T,3614090360),x=u(x,w,E,S,d[v+1],N,3905402710),S=u(S,x,w,E,d[v+2],C,606105819),E=u(E,S,x,w,d[v+3],k,3250441966),w=u(w,E,S,x,d[v+4],T,4118548399),x=u(x,w,E,S,d[v+5],N,1200080426),S=u(S,x,w,E,d[v+6],C,2821735955),E=u(E,S,x,w,d[v+7],k,4249261313),w=u(w,E,S,x,d[v+8],T,1770035416),x=u(x,w,E,S,d[v+9],N,2336552879),S=u(S,x,w,E,d[v+10],C,4294925233),E=u(E,S,x,w,d[v+11],k,2304563134),w=u(w,E,S,x,d[v+12],T,1804603682),x=u(x,w,E,S,d[v+13],N,4254626195),S=u(S,x,w,E,d[v+14],C,2792965006),E=u(E,S,x,w,d[v+15],k,1236535329),w=a(w,E,S,x,d[v+1],L,4129170786),x=a(x,w,E,S,d[v+6],A,3225465664),S=a(S,x,w,E,d[v+11],O,643717713),E=a(E,S,x,w,d[v+0],M,3921069994),w=a(w,E,S,x,d[v+5],L,3593408605),x=a(x,w,E,S,d[v+10],A,38016083),S=a(S,x,w,E,d[v+15],O,3634488961),E=a(E,S,x,w,d[v+4],M,3889429448),w=a(w,E,S,x,d[v+9],L,568446438),x=a(x,w,E,S,d[v+14],A,3275163606),S=a(S,x,w,E,d[v+3],O,4107603335),E=a(E,S,x,w,d[v+8],M,1163531501),w=a(w,E,S,x,d[v+13],L,2850285829),x=a(x,w,E,S,d[v+2],A,4243563512),S=a(S,x,w,E,d[v+7],O,1735328473),E=a(E,S,x,w,d[v+12],M,2368359562),w=f(w,E,S,x,d[v+5],_,4294588738),x=f(x,w,E,S,d[v+8],D,2272392833),S=f(S,x,w,E,d[v+11],P,1839030562),E=f(E,S,x,w,d[v+14],H,4259657740),w=f(w,E,S,x,d[v+1],_,2763975236),x=f(x,w,E,S,d[v+4],D,1272893353),S=f(S,x,w,E,d[v+7],P,4139469664),E=f(E,S,x,w,d[v+10],H,3200236656),w=f(w,E,S,x,d[v+13],_,681279174),x=f(x,w,E,S,d[v+0],D,3936430074),S=f(S,x,w,E,d[v+3],P,3572445317),E=f(E,S,x,w,d[v+6],H,76029189),w=f(w,E,S,x,d[v+9],_,3654602809),x=f(x,w,E,S,d[v+12],D,3873151461),S=f(S,x,w,E,d[v+15],P,530742520),E=f(E,S,x,w,d[v+2],H,3299628645),w=l(w,E,S,x,d[v+0],B,4096336452),x=l(x,w,E,S,d[v+7],j,1126891415),S=l(S,x,w,E,d[v+14],F,2878612391),E=l(E,S,x,w,d[v+5],I,4237533241),w=l(w,E,S,x,d[v+12],B,1700485571),x=l(x,w,E,S,d[v+3],j,2399980690),S=l(S,x,w,E,d[v+10],F,4293915773),E=l(E,S,x,w,d[v+1],I,2240044497),w=l(w,E,S,x,d[v+8],B,1873313359),x=l(x,w,E,S,d[v+15],j,4264355552),S=l(S,x,w,E,d[v+6],F,2734768916),E=l(E,S,x,w,d[v+13],I,1309151649),w=l(w,E,S,x,d[v+4],B,4149444226),x=l(x,w,E,S,d[v+11],j,3174756917),S=l(S,x,w,E,d[v+2],F,718787259),E=l(E,S,x,w,d[v+9],I,3951481745),w=n(w,m),E=n(E,g),S=n(S,y),x=n(x,b);return(h(w)+h(E)+h(S)+h(x)).toLowerCase()}function Fankui(){}Fankui.prototype={backToPgMain:!1,config_secondlevelIndex:-1,config_threelevelIndex:-1,opt:-1,opt_txt:"",url_protocol:"",url_feedback:"doctor.browser.360.cn/Pbrowseridea/feedback",url_care_upload:"care.help.360.cn/care/upload",url_config:"c.mse.360.cn/c/v2",configData:{},form_imgs:[],form_imgs_Bytes:[],toast:function(t){$(".div-toast").html(t),$(".div-toast").show(),setTimeout(function(){$(".div-toast").hide()},1500)},showToast:function(t){$(".div-toast").html(t),$(".div-toast").show()},logPoint:function(t,n,r){var i={type:t,name:n,desc:r};monitor.log(i,"wpo")},lookpic:function(t){return},addEvent:function(){var t=this;$(document).on("click",".back",function(){var e=GetQueryString("srcg"),t=window.location.hash;if(t=="#three"||t==""){var n={action:"goback",data:{callback:"__todoItemCallback__"}},r=btoa(encodeURIComponent(JSON.stringify(n)));console.log("$huodong$peas:"+r)}else t=="#form"&&e=="mini"?console.log("$close_page"):window.history.back()}),$(document).on("click",".ul-qlist a",function(){var e=$(this).attr("data-index"),n=$(this).attr("data-tag"),r=$(this).html().trim(),i=null,s="";t.logPoint("\u70b9\u51fb","\u95ee\u9898\u5206\u7c7b",r),s="#details",i=t.configData;var o=JSON.parse(JSON.stringify(i));o.list=o.list.splice(e,1),t.loadPg_details(o),window.location.hash=s}),$(document).on("click",".btn-fankui",function(){t.logPoint("\u70b9\u51fb","\u6211\u8981\u53cd\u9988","\u6211\u8981\u53cd\u9988"),t.opt!=-1&&t.opt_txt&&($(".div-qclass-name").html(t.opt_txt),$(".div-qclass-name").attr("data-opt",t.opt),$("#popup_class").find("li").removeClass("icon-choose"),$("#popup_class").find('li[data-opt="'+t.opt+'"]').addClass("icon-choose")),window.location.hash="#form"}),window.onhashchange=function(){t.loadPg()},$(document).on("click",".div-qdetails .item-img",function(){t.lookpic($(this))}),$("#popup_class").click(function(e){var t=$(e.srcElement||e.target);if(t.attr("id")=="popup_class")$("#popup_class").hide();else if(t.attr("id")=="btn_close_classbox"){var n=$("#popup_class .list-class li.icon-choose");$(".div-qclass-name").html(n.html()),$(".div-qclass-name").attr("data-opt",n.attr("data-opt")),$("#popup_class").hide(),$("#txt_form_desc").keyup()}else t[0].nodeName.toUpperCase()=="LI"&&($("#popup_class li").removeClass("icon-choose"),t.addClass("icon-choose"))}),$(document).on("click",".div-addfile",function(){$("#add_imgs").click()}),$("#add_imgs").on("change",function(e){var n=this.files,r=t.form_imgs.length;if(n.length+r>6)t.toast("\u53ea\u80fd\u4e0a\u4f206\u5f20\u56fe\u7247\u54e6");else if(n.length>0)for(var i=0;i<n.length;i++)t.form_imgs_Bytes.push(n[i]),function(e){var i=new FileReader;i.onload=function(e){t.form_imgs.push(i.result),t.form_imgs.length==n.length+r&&t.loadForm_imgs()},i.readAsDataURL(n[e])}(i)}),$(document).on("click",".img-del",function(){var e=$(this).attr("data-index");t.form_imgs.splice(e,1),t.form_imgs_Bytes.splice(e,1),t.loadForm_imgs()}),$(document).on("click",".screenshot",function(){t.lookpic($(this))}),$("#txt_form_desc").keyup(function(){var e=$("#txt_form_desc").val().trim(),t=$(".div-qclass-name").html();e.length>0&&t!="\u8bf7\u9009\u62e9"?$("#btn_submit").removeClass("btn-disabled").addClass("btn-enabled"):$("#btn_submit").removeClass("btn-enabled").addClass("btn-disabled")}),$(document).on("click","#btn_submit",function(){t.logPoint("\u70b9\u51fb","\u63d0\u4ea4","\u63d0\u4ea4"),t.submitForm()}),$("#div_lookpic").click(function(e){var t=$(e.srcElement||e.target);t[0].nodeName.toUpperCase()=="DIV"&&$("#div_lookpic").hide()})},submitForm:function(){function g(e){function w(){t.postData(t.url_feedback,h,!1)}h.append("os_verseion",i),h.append("phone_type",s),h.append("is_root",o),h.append("user_id",u),h.append("network_type",a),h.append("ram_size",f),h.append("plugin_version",c),h.append("app","pbrowseridea"),h.append("pid","3443"),h.append("ver",l);var d=$(".div-qclass-name").attr("data-opt"),v="opt_"+d,m="txt_"+d;h.append(v,1),h.append(m,n+e),h.append("contact",0),h.append("contact_text",r);if(t.form_imgs_Bytes&&t.form_imgs_Bytes.length>0)for(var g=0;g<t.form_imgs_Bytes.length;g++){var y=t.form_imgs_Bytes[g];h.append("upfiles"+(g+1),y),p.append("img"+(g+1),y)}t.showToast("\u63d0\u4ea4\u4e2d..."),t.disableInput(),p.append("project","mobile_browser"),p.append("ver",l),p.append("tag","other"),p.append("content",n+e+";"+s+";"+u),p.append("contact",r),p.append("sys",i);var b="mobile_browser"+n+e+";"+s+";"+u+"360clientfeedback";p.append("verify",md5(b)),t.postData(t.url_care_upload,p,w)}var t=this,n=$("#txt_form_desc").val().trim(),r=$(".txt-tel").val().trim();if(!n||n.length==0){t.toast("\u610f\u89c1\u4e0d\u80fd\u4e3a\u7a7a\uff01"),$("#txt_form_desc").focus();return}var i=GetQueryString("os"),s=GetQueryString("deviceName"),o=GetQueryString("isRoot"),u=GetQueryString("WID"),a=GetQueryString("network"),f=GetQueryString("RAM"),l=GetQueryString("appversionname"),c=GetQueryString("pluginVersion");l.substr(0,1)==="v"&&(l=l.slice(1));var h=new FormData,p=new FormData,d="-",v={action:"player_feed_back",data:{callback:"getParamsCallback"}},m=btoa(encodeURIComponent(JSON.stringify(v)));console.log("$trans_params:"+m),window.getParamsCallback=function(){function m(e){function w(){t.postData(t.url_feedback,h,!1)}h.append("os_verseion",i),h.append("phone_type",s),h.append("is_root",o),h.append("user_id",u),h.append("network_type",a),h.append("ram_size",f),h.append("plugin_version",c),h.append("app","pbrowseridea"),h.append("pid","3443"),h.append("ver",l);var d=$(".div-qclass-name").attr("data-opt"),v="opt_"+d,m="txt_"+d;h.append(v,1),h.append(m,n+e),h.append("contact",0),h.append("contact_text",r);if(t.form_imgs_Bytes&&t.form_imgs_Bytes.length>0)for(var g=0;g<t.form_imgs_Bytes.length;g++){var y=t.form_imgs_Bytes[g];h.append("upfiles"+(g+1),y),p.append("img"+(g+1),y)}t.showToast("\u63d0\u4ea4\u4e2d..."),t.disableInput(),p.append("project","mobile_browser"),p.append("ver",l),p.append("tag","other"),p.append("content",n+e+";"+s+";"+u),p.append("contact",r),p.append("sys",i);var b="mobile_browser"+n+e+";"+s+";"+u+"360clientfeedback";p.append("verify",md5(b)),t.postData(t.url_care_upload,p,w)}var e=(arguments.length<=0?undefined:arguments[0])||"",v=(arguments.length<=1?undefined:arguments[1])||"";e=decodeURIComponent(atob(e)),v=decodeURIComponent(atob(v)),console.log(e,v,"\u7f51\u9875\u53ca\u89c6\u9891URL"),d=d+"pageURL:"+e,m(d)}},enableInput:function(){$("#txt_form_desc").removeAttr("disabled"),$("#add_imgs").removeAttr("disabled"),$("#txt_form_tel").removeAttr("disabled")},disableInput:function(){$("#txt_form_desc").attr("disabled","disabled"),$("#add_imgs").attr("disabled","disabled"),$("#txt_form_tel").attr("disabled","disabled")},postData:function(t,n,r){var i=this;$.ajax({url:t,type:"POST",async:!0,processData:!1,contentType:!1,timeout:15e3,beforeSend:function(){$("#btn_submit").attr("disabled","disabled")},data:n,success:function(t){$("#btn_submit").removeAttr("disabled"),r?r():(i.toast("\u63d0\u4ea4\u6210\u529f"),i.enableInput(),i.backToPgMain=!0,window.history.back(),$("#btn_submit").removeClass("btn-enabled").addClass("btn-disabled"),$("#txt_form_desc").val(""),$(".txt-tel").val(""),i.form_imgs=[],i.form_imgs_Bytes=[],i.loadForm_imgs())},error:function(t,n){n=="timeout"?i.toast("\u63d0\u4ea4\u5931\u8d25"):i.toast("\u63d0\u4ea4\u5931\u8d25"),$("#btn_submit").removeAttr("disabled"),i.enableInput()}})},loadPg:function(){var t=this,n=window.location.hash.split("#")[1],r=["three","details","form"];$(".div-page").hide(),$("#popup_class").hide(),t.backToPgMain?n=="three"?(t.backToPgMain=!1,$("#pg_three").show()):window.history.back():r.indexOf(n)>-1?$("#pg_"+n).show():$("#pg_three").show()},firstLoadPg:function(){var t=window.location.hash.split("#")[1],n=["three","form"];$(".div-page").hide(),n.indexOf(t)>-1?$("#pg_"+t).show():(window.location.hash="#three",$("#pg_three").show())},loadPg_three:function(t){var n=baidu.template,r=n("bdt_threeclass",{list:t.list,opt:t.opt});$("#pg_three .div-all-question .ul-qlist").html(r),setTimeout(function(){window.scroll(0,0)},0)},loadPg_details:function(t){if(t){var n=baidu.template,r=n("bdt_details",{data:t});$("#pg_details .div-qdetails").html(r)}setTimeout(function(){window.scroll(0,0)},0)},loadForm_imgs:function(){var t=baidu.template,n=t("bdt_form_imgs",{imgs:this.form_imgs});$("#pg_form .div-imgs").html(n)},initQuestionList:function(){var t=this;t.loadForm_imgs(),window.location.hash="#three";var n=t.configData;t.loadPg_three(n)},loadConfig:function(){var t=this,n={os:{os_api:"25",os_version:GetQueryString("os"),os_type:"2"},app:{app_vcode:GetQueryString("appversioncode")||"",app_vname:GetQueryString("appversionname")||"",app_pkg:"com.qihoo.contents"},plugin:{plugin_vcode:GetQueryString("browserx_vc")||"",plugin_vname:GetQueryString("browserx_vn")||"",plugin_pkg:"com.qihoo.browser.browser"},pluginsdk:{pluginsdk_vcode:"2001000",pluginsdk_vname:"",pluginsdk_pkg:"com.qihoo360.newssdkcore"},adsdk:{adsdk_vcode:"200900",adsdk_vname:""},wid:GetQueryString("WID"),project:"config_fanqie",network_type:GetQueryString("network"),location:"",index:[{m:"h5_fankui_video_config",i:0}],data:{os:{os_api:"25",os_version:GetQueryString("os"),os_type:"2"}}};str="data="+JSON.stringify(n),$.ajax({url:t.url_config+"?"+str,async:!0,type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,dataType:"json",success:function(n){t.configData=n.h5_fankui_video_config.info,t.initQuestionList()},error:function(n){t.toast("\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}})},initData:function(){var t=this;t.url_protocol=window.location.protocol+"//",t.url_care_upload=t.url_protocol+t.url_care_upload,t.url_feedback=t.url_protocol+t.url_feedback,t.url_config=t.url_protocol+t.url_config,t.loadConfig();var n=window.screen.height/2;$("#popup_class .list-class").height(n+"px")},init:function(){var t=this;t.initData(),t.addEvent(),t.firstLoadPg()}},$(function(){(new Fankui).init()});